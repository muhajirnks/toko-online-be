import{v as S,w as L,r as g,x as k,j as t,D as w,C as A,F,a2 as T,a as z,B as j,L as y,c as l}from"./index-BA4vPZ7q.js";import{u as B}from"./useCartStore-LB3hT5Rg.js";import{c as R,F as q,b as P}from"./index-CLafgQ1a.js";import{c as _}from"./order.service-BYZ1FOCI.js";import{C as v,f as C}from"./useFetch-DqNU2Yeo.js";import{T as r}from"./Typography-Bxms64ZU.js";import{G as p}from"./Grid-Bl-cuco9.js";import{a as D,L as M}from"./List-B9r11roe.js";import{L as N}from"./ListItem-DFOMi7AH.js";import{A as U}from"./Avatar-Be4c5rgz.js";import{L as W}from"./ListItemText-7wqA6nJs.js";import{I as h}from"./IconButton-EeorZ09J.js";import{D as I}from"./Divider-CYhqGXGi.js";import{C as G,a as O}from"./CardContent-N8hBGK-S.js";import"./isMuiElement-CBNsuzD0.js";import"./createSvgIcon-DNOLmaIM.js";import"./listItemTextClasses-9PZypynd.js";import"./dividerClasses-BpaJZQGp.js";function E(e){return S("MuiListItemAvatar",e)}L("MuiListItemAvatar",["root","alignItemsFlexStart"]);const Q=e=>{const{alignItems:a,classes:o}=e;return F({root:["root",a==="flex-start"&&"alignItemsFlexStart"]},E,o)},Y=w("div",{name:"MuiListItemAvatar",slot:"Root",overridesResolver:(e,a)=>{const{ownerState:o}=e;return[a.root,o.alignItems==="flex-start"&&a.alignItemsFlexStart]}})({minWidth:56,flexShrink:0,variants:[{props:{alignItems:"flex-start"},style:{marginTop:8}}]}),$=g.forwardRef(function(a,o){const i=k({props:a,name:"MuiListItemAvatar"}),{className:x,...n}=i,u=g.useContext(D),c={...i,alignItems:u.alignItems},d=Q(c);return t.jsx(Y,{className:A(d.root,x),ownerState:c,ref:o,...n})}),xt=()=>{const{items:e,removeItem:a,updateQuantity:o,getTotalPrice:i,clearCart:x}=B(),n=T(s=>s.setSnackbar),u=z(),[c,d]=g.useState(!1),b=async()=>{d(!0);try{const s=e.map(f=>({productId:f.product._id,quantity:f.quantity})),{error:m}=await _({items:s});m?n({type:"failure",message:m.message}):(n({type:"success",message:"Order created successfully!"}),x(),u("/orders"))}catch(s){n({type:"failure",message:s.message||"Failed to create order"})}finally{d(!1)}};return e.length===0?t.jsxs(v,{maxWidth:"md",sx:{py:8,textAlign:"center"},children:[t.jsx(r,{variant:"h5",gutterBottom:!0,children:"Your cart is empty"}),t.jsx(j,{component:y,to:"/",variant:"contained",sx:{mt:2},children:"Go Shopping"})]}):t.jsxs(v,{maxWidth:"lg",sx:{py:4},children:[t.jsx(r,{variant:"h4",component:"h1",gutterBottom:!0,fontWeight:"bold",children:"Shopping Cart"}),t.jsxs(p,{container:!0,spacing:4,children:[t.jsx(p,{size:{xs:12,md:8},children:t.jsx(M,{sx:{width:"100%",bgcolor:"background.paper",borderRadius:2,boxShadow:1},children:e.map(s=>t.jsxs(l,{children:[t.jsxs(N,{alignItems:"flex-start",secondaryAction:t.jsx(h,{edge:"end","aria-label":"delete",onClick:()=>a(s.product._id),children:t.jsx(P,{color:"error",className:"text-lg"})}),children:[t.jsx($,{sx:{mr:2},children:t.jsx(U,{variant:"rounded",src:s.product.imageUrl,sx:{width:80,height:80}})}),t.jsx(W,{primary:t.jsx(r,{variant:"h6",component:y,to:`/products/${s.product._id}`,sx:{textDecoration:"none",color:"inherit"},children:s.product.name}),secondary:t.jsxs(l,{sx:{mt:1},children:[t.jsx(r,{variant:"body2",color:"text.primary",children:C(s.product.price)}),t.jsxs(l,{sx:{display:"flex",alignItems:"center",mt:1,gap:1},children:[t.jsx(h,{size:"small",onClick:()=>o(s.product._id,s.quantity-1),children:t.jsx(R,{size:14})}),t.jsx(r,{variant:"body1",children:s.quantity}),t.jsx(h,{size:"small",onClick:()=>o(s.product._id,s.quantity+1),children:t.jsx(q,{size:14})})]})]})})]}),t.jsx(I,{variant:"inset",component:"li"})]},s.product._id))})}),t.jsx(p,{size:{xs:12,md:4},children:t.jsx(G,{sx:{borderRadius:2,boxShadow:1},children:t.jsxs(O,{children:[t.jsx(r,{variant:"h6",gutterBottom:!0,children:"Order Summary"}),t.jsxs(l,{sx:{display:"flex",justifyContent:"space-between",mb:2},children:[t.jsx(r,{variant:"body1",children:"Total Items"}),t.jsx(r,{variant:"body1",children:e.reduce((s,m)=>s+m.quantity,0)})]}),t.jsx(I,{sx:{my:2}}),t.jsxs(l,{sx:{display:"flex",justifyContent:"space-between",mb:4},children:[t.jsx(r,{variant:"h6",children:"Total Price"}),t.jsx(r,{variant:"h6",color:"primary",children:C(i())})]}),t.jsx(j,{fullWidth:!0,variant:"contained",size:"large",onClick:b,disabled:c,children:c?"Processing...":"Checkout Now"})]})})})]})]})};export{xt as default};
