import{ab as v,r as h,a5 as F,u as B,a as C,j as e,P as T,c,B as z,at as W}from"./index-CoCr-Lwu.js";import{I as x}from"./Input-CKBMGBQD.js";import{F as P}from"./FIleInput-C9AROsxT.js";import{p as k}from"./prepareFormData-CaUafuFc.js";import{m as E,c as I,d as w,e as f,F as D,a as R,b as d}from"./formik.esm-BGeGxEe7.js";import{C as $}from"./Container-DLkYmbpc.js";import{T as g}from"./Typography-3PLUSMmk.js";import{G as s}from"./Grid-BdMrhXSd.js";import{F as p}from"./TextField-CWhFec2Z.js";import"./index-BWLtMYHi.js";import"./IconButton-De274572.js";import"./styled-Dr_zOePF.js";import"./isMuiElement-41k7TQVi.js";import"./Select-eAE6PZsy.js";import"./Menu-BHH0Xlnd.js";import"./Portal-Db180ur5.js";import"./List-B8z-TvVg.js";import"./useControlled-CQs6qZha.js";import"./createSvgIcon-f0cybHIH.js";const q=o=>{const i=k(o);return v("/api/v1/stores",{method:"POST",body:i})},G=E(()=>I({name:f().required("Store name is required"),description:f().nullable().optional(),avatar:w().nullable().optional()})),se=()=>{const[o,i]=h.useState(!1),l=F(a=>a.setSnackbar),{user:m,setUser:j}=B(),u=C(),S=G(),b={name:"",description:"",avatar:null},y=async a=>{i(!0);try{const{data:t,error:r}=await q({name:a.name,description:a.description||"",avatar:a.avatar});if(t){l({type:"success",message:"Store created successfully!"});const{data:n}=await W();n&&j(n.data),u("/seller/products")}r&&l({type:"failure",message:r.message})}catch(t){l({type:"failure",message:t.message||"Failed to create store"})}finally{i(!1)}};return h.useEffect(()=>{m?.store&&u("/seller/products")},[m]),e.jsx($,{maxWidth:"md",sx:{py:8},children:e.jsxs(T,{sx:{p:4,borderRadius:4},children:[e.jsx(g,{variant:"h4",gutterBottom:!0,fontWeight:"bold",children:"Create Your Store"}),e.jsx(g,{variant:"body1",color:"text.secondary",sx:{mb:4},children:"Start selling your products by creating a store profile."}),e.jsx(D,{initialValues:b,validationSchema:S,onSubmit:y,children:({setFieldValue:a})=>e.jsx(R,{children:e.jsxs(s,{container:!0,spacing:3,children:[e.jsx(s,{size:{xs:12},children:e.jsxs(c,{sx:{display:"grid",gap:1.5},children:[e.jsx(p,{htmlFor:"name",children:"Store Name"}),e.jsx(d,{name:"name",children:({field:t,meta:r})=>e.jsx(x,{...t,id:"name",fullWidth:!0,placeholder:"Enter store name",error:r.touched&&!!r.error,helperText:r.touched&&r.error})})]})}),e.jsx(s,{size:{xs:12},children:e.jsxs(c,{sx:{display:"grid",gap:1.5},children:[e.jsx(p,{htmlFor:"description",children:"Description"}),e.jsx(d,{name:"description",children:({field:t,meta:r})=>e.jsx(x,{...t,id:"description",fullWidth:!0,multiline:!0,rows:4,placeholder:"Tell customers about your store",error:r.touched&&!!r.error,helperText:r.touched&&r.error})})]})}),e.jsx(s,{size:{xs:12},children:e.jsxs(c,{sx:{display:"grid",gap:1.5},children:[e.jsx(p,{children:"Store Avatar"}),e.jsx(d,{name:"avatar",children:({field:t,meta:r})=>e.jsx(P,{value:t.value,onChange:n=>a("avatar",n),error:r.touched&&!!r.error,helperText:r.touched&&r.error})})]})}),e.jsx(s,{size:{xs:12},children:e.jsx(z,{type:"submit",variant:"contained",fullWidth:!0,size:"large",disabled:o,sx:{mt:2,py:1.5,borderRadius:2,fontWeight:"bold"},children:o?"Creating Store...":"Create Store"})})]})})})]})})};export{se as default};
