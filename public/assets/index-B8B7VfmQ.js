import{r as c,i as N,a as b,j as s,c as u,k,m as v,b as f,B as A,d as S,L as I,e as B,n as C}from"./index-Dio-x1pl.js";import{F as E,a as M}from"./formik.esm--TOOmNG-.js";import{u as T}from"./useSnackbar-hIkvlhJY.js";import{A as F}from"./AuthLayout-BwhoJlj7.js";import{I as h}from"./Input-iPn9hjMZ.js";import{b as L,A as V}from"./authSchema-Bmw0N11j.js";import{T as P}from"./Typography-DwSWE2aq.js";import{I as d}from"./InputAdornment-ht17UeKj.js";import{I as R}from"./IconButton-CCAMRddQ.js";import"./Slide-CEUN_h8K.js";import"./Menu-CifymwwS.js";import"./Portal-SBv2pH_W.js";import"./List-CUJTK2NX.js";import"./TextField-DXv_0keH.js";import"./Select-BcEcS1hI.js";import"./useControlled-CED0zS4L.js";import"./createSvgIcon-DR7rpQpn.js";import"./isMuiElement-Dz9jvbUr.js";const W={newPassword:"",confirmPassword:""},O=L(),os=()=>{const[l,m]=c.useState(""),[n,g]=c.useState(!1),[i]=N(),p=b(),x=T(),j=async(e,{setErrors:t})=>{m("");const o=i.get("token"),{data:a,error:r}=await C({password:e.newPassword,token:o});a&&(x({message:a.message,type:"success"}),p("/login")),r&&(r.errors?t(r.errors):m(r.message))},y=()=>{g(!n)};return c.useEffect(()=>{const e=i.get("token");console.log(e),e||(x({message:"Token is invalid.",type:"failure"}),p("/login"))},[i]),s.jsx(F,{title:"Create New Password",description:"A secure password helps protect your account.",children:s.jsx(E,{initialValues:W,validationSchema:O,onSubmit:j,children:({isSubmitting:e,errors:t,touched:o,values:a,handleChange:r,handleBlur:w})=>s.jsxs(M,{className:"space-y-6",children:[l&&s.jsx(V,{severity:"error",className:"rounded-xl border-0 shadow-lg",children:l}),s.jsxs(u,{className:"space-y-2",children:[s.jsx(P,{className:"text-[15px] font-medium",children:"New Password"}),s.jsx(h,{name:"newPassword",type:n?"text":"password",placeholder:"Enter your new password",fullWidth:!0,value:a.newPassword,onChange:r,onBlur:w,error:o.newPassword&&!!t.newPassword,helperText:o.newPassword&&t.newPassword,slotProps:{input:{startAdornment:s.jsx(d,{position:"start",children:s.jsx(f,{className:"text-gray-500 text-xl"})}),endAdornment:s.jsx(d,{position:"end",children:s.jsx(R,{onClick:y,edge:"end",className:"text-gray-500 hover:text-black transition-colors",children:n?s.jsx(k,{className:"text-xl"}):s.jsx(v,{className:"text-xl"})})})}}})]}),s.jsxs(u,{className:"space-y-2",children:[s.jsx(P,{className:"text-[15px] font-medium",children:"Confirm New Password"}),s.jsx(h,{name:"confirmPassword",type:"password",placeholder:"Confirm your new password",fullWidth:!0,value:a.confirmPassword,onChange:r,onBlur:w,error:o.confirmPassword&&!!t.confirmPassword,helperText:o.confirmPassword&&t.confirmPassword,slotProps:{input:{startAdornment:s.jsx(d,{position:"start",children:s.jsx(f,{className:"text-gray-500 text-xl"})})}}})]}),s.jsx(A,{type:"submit",variant:"contained",fullWidth:!0,className:"group relative overflow-hidden",loading:e,endIcon:!e&&s.jsx(S,{className:"group-hover:translate-x-1 transition-transform duration-200"}),children:"Update Password"}),s.jsx("div",{className:"text-center pt-2",children:s.jsxs(I,{type:"button",to:"/login",className:"flex items-center justify-center gap-2 text-blue-500 hover:text-blue-600 transition-colors font-medium text-sm mx-auto bg-transparent border-none cursor-pointer",children:[s.jsx(B,{className:"text-base"}),"Back to Sign In"]})})]})})})};export{os as default};
