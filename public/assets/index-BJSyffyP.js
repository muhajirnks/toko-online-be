import{r as a,j as e,c as f,B as g,f as h,L as j,g as w,h as b,d as y,i as N}from"./index-B_2ZYanf.js";import{f as S}from"./dateUtils-Bv0SVz_X.js";import{F as k}from"./Menu-p_mUGGRe.js";import{A as v,b as F}from"./authSchema-BWpDoYDE.js";import{F as B,a as E}from"./formik.esm-B7al3lwn.js";import{I}from"./Input-CwEgEK_6.js";import{F as A}from"./TextField-BZ9SVMZh.js";import{I as C}from"./InputAdornment-2Neal-5G.js";import{A as L}from"./AuthLayout-DWTKEftv.js";import"./Portal-BBa1Pjsa.js";import"./List-B8fLbvj2.js";import"./createSvgIcon-CECKdikk.js";import"./IconButton-BINfcKHQ.js";import"./Select-CxUoqIFD.js";import"./useControlled-BVDGpJF_.js";import"./Typography-CJmFx3Tj.js";import"./isMuiElement-BXISGSkC.js";import"./Slide-CSA1s7p_.js";const x=60,P=({email:c})=>{const[r,n]=a.useState(x),[i,s]=a.useState(!1),[o,l]=a.useState(""),t=a.useRef(null),d=a.useCallback(()=>{n(x),t.current&&clearInterval(t.current),t.current=setInterval(()=>{n(m=>m<=1?(t.current&&clearInterval(t.current),0):m-1)},1e3)},[x]),u=async()=>{if(i||r>0)return;l(""),s(!0);const{data:m,error:p}=await b({email:c,verifyEmailUrl:window.origin+"/reset-password"});m&&d(),p&&l(p.message),s(!1)};return a.useEffect(()=>{d()},[]),e.jsxs(f,{className:"space-y-6",children:[o&&e.jsx(k,{in:!!o,children:e.jsx(v,{severity:"error",className:"rounded-xl border-0",children:o})}),e.jsx(g,{variant:"contained",fullWidth:!0,className:"group relative overflow-hidden",sx:{borderRadius:"12px"},endIcon:!i&&!r&&e.jsx(h,{className:"group-hover:translate-x-1 transition-transform duration-200"}),disabled:!!r||i,onClick:u,children:r?S(r):i?"Sending Reset Link...":"Send again"}),e.jsx("div",{className:"text-center pt-2",children:e.jsxs(j,{type:"button",to:"/login",className:"flex items-center justify-center gap-2 text-blue-500 hover:text-blue-600 transition-colors font-medium text-sm mx-auto bg-transparent border-none cursor-pointer",children:[e.jsx(w,{className:"text-[15px]"}),"Back to Sign In"]})})]})},R={email:""},M=F(),W=({nextStep:c})=>{const[r,n]=a.useState(""),i=async(s,{setErrors:o})=>{n("");const{data:l,error:t}=await b({...s,verifyEmailUrl:window.origin+"/reset-password"});l&&c(s.email),t&&(t.errors?o(t.errors):n(t.message))};return e.jsx(B,{initialValues:R,validationSchema:M,onSubmit:i,children:({isSubmitting:s,errors:o,touched:l,values:t,handleChange:d,handleBlur:u})=>e.jsxs(E,{className:"grid gap-5",children:[r&&e.jsx(v,{severity:"error",className:"rounded-xl border-0 shadow-lg",children:r}),e.jsxs(f,{className:"grid gap-[13px]",children:[e.jsx(A,{children:"Email Address"}),e.jsx(I,{name:"email",type:"email",placeholder:"Enter your email address",fullWidth:!0,value:t.email,onChange:d,onBlur:u,error:l.email&&!!o.email,helperText:l.email&&o.email,slotProps:{input:{startAdornment:e.jsx(C,{position:"start",children:e.jsx(y,{className:"text-gray-500 text-xl"})})}}})]}),e.jsx(g,{type:"submit",variant:"contained",fullWidth:!0,loading:s,className:"group relative overflow-hidden",endIcon:!s&&e.jsx(h,{className:"group-hover:translate-x-1 transition-transform duration-200"}),children:"Send Reset Link"}),e.jsx("div",{className:"text-center pt-2",children:e.jsxs(j,{type:"button",to:"/login",className:"flex items-center justify-center gap-2 text-blue-500 hover:text-blue-600 transition-colors font-medium text-sm mx-auto bg-transparent border-none cursor-pointer group",children:[e.jsx(w,{className:"text-base group-hover:-translate-x-1 transition-transform duration-200"}),"Back to Sign In"]})})]})})},te=()=>{const[c,r]=a.useState(1),[n,i]=a.useState(""),s=c==1?{title:"Lost Your Password?",description:"No worries, getting back into your account is quick and simple."}:{title:"Check your inbox",description:`We've sent a password reset link to ${n}.`,icon:e.jsx(N,{className:"text-center text-8xl text-gray-300 mx-auto"})};return e.jsx(L,{...s,children:c==1?e.jsx(W,{nextStep:o=>{i(o),r(2)}}):e.jsx(P,{email:n})})};export{te as default};
