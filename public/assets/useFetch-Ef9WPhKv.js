import{r as a,a as S,a5 as h,ab as C}from"./index-CoCr-Lwu.js";const v=(i,n={})=>{const{immediate:u=!0,showToast:l=!0}=n,[t,c]=a.useState({loading:u,data:null,error:null}),m=S(),f=h(e=>e.setSnackbar),s=a.useRef(0),b=a.useCallback(e=>c({...t,loading:e}),[t]),k=a.useCallback(e=>c({...t,data:e}),[t]),o=a.useCallback(async()=>{c(y=>({...y,loading:!0}));const{data:e,error:r,status:g}=await C(i,n);r&&l&&!r.errors&&f({type:"failure",message:r.message}),g===401&&m("/login");const d=e?.message;return d&&!u&&l&&f({type:"success",message:d}),s.current=2,c({data:e,error:r,loading:!1}),{data:e,error:r,status:g}},[i,n?.qs,n?.body]);return a.useEffect(()=>{u&&((!s.current||s.current==2)&&o(),s.current||(s.current=1))},[o]),{...t,fetchData:o,setData:k,setLoading:b}};export{v as u};
