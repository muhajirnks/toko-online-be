import{r as n,a5 as N,j as e,c as o,a7 as k,a2 as E}from"./index-CoCr-Lwu.js";import{D as I,c as O,P as w}from"./Pagination-CzO8dYpH.js";import{u as A,a as T}from"./order.service-BCybII5u.js";import{f as _}from"./stringUtils-CDJQw5-v.js";import{B}from"./index-CAApNuAC.js";import{I as L}from"./Input-CKBMGBQD.js";import{a as V}from"./Menu-BHH0Xlnd.js";import{T as u}from"./Typography-3PLUSMmk.js";import{a as Y}from"./TextField-CWhFec2Z.js";import{S as z}from"./Select-eAE6PZsy.js";import{M as l}from"./MenuItem-Cds6f5lz.js";import{I as H}from"./InputAdornment-BUUN-303.js";import{I as q}from"./IconButton-De274572.js";import{C as F}from"./Chip-BPvolZT3.js";import"./dateUtils-Bv0SVz_X.js";import"./TableRow-vzcb-Cwo.js";import"./useControlled-CQs6qZha.js";import"./createSvgIcon-f0cybHIH.js";import"./Avatar-DKP2U2G5.js";import"./Tooltip-RUjzR2Jp.js";import"./Portal-Db180ur5.js";import"./List-B8z-TvVg.js";import"./useFetch-Ef9WPhKv.js";import"./isMuiElement-41k7TQVi.js";import"./listItemIconClasses-C8DadHf-.js";import"./listItemTextClasses-Djdqevzi.js";import"./dividerClasses-QzE5IgDx.js";const fe=()=>{const[i,f]=n.useState(1),[c,j]=n.useState(""),[p,d]=n.useState(null),[h,x]=n.useState(null),m=N(t=>t.setSnackbar),y=n.useMemo(()=>({page:i,limit:10,search:c||void 0}),[i,c]),{data:r,loading:b,fetchData:S}=A(y),C=(t,a)=>{d(t.currentTarget),x(a)},g=()=>{d(null),x(null)},P=async(t,a)=>{try{const{error:s}=await T(t,{status:a});s?m({type:"failure",message:s.message}):(m({type:"success",message:"Order status updated successfully!"}),g(),S())}catch(s){m({type:"failure",message:s.message||"An error occurred"})}},v=t=>{switch(t){case"pending":return"warning";case"paid":return"info";case"shipped":return"primary";case"completed":return"success";case"cancelled":return"error";default:return"default"}},M=O({uniqueField:"_id",columns:[{key:"createdAt",label:"Date",type:"custom",renderValue:t=>E(t).format("DD MMM YYYY HH:mm")},{key:"customerName",label:"Customer",type:"string"},{key:"totalAmount",label:"Total",type:"custom",renderValue:t=>_(t)},{key:"status",label:"Status",type:"custom",renderValue:t=>e.jsx(F,{label:t.toUpperCase(),color:v(t),size:"small"})},{key:"items",label:"Products",type:"custom",renderValue:t=>{const a=t;return e.jsx(o,{children:a.map((s,D)=>e.jsxs(u,{variant:"body2",children:[s.name," x ",s.quantity]},D))})}}]});return e.jsxs(o,{className:"flex flex-col py-12 px-[50px] pb-4",children:[e.jsx(V,{anchorEl:p,open:!!p,onClose:g,children:e.jsxs(o,{sx:{p:2,minWidth:200},children:[e.jsx(u,{variant:"subtitle2",sx:{mb:1},children:"Update Status"}),e.jsx(Y,{fullWidth:!0,size:"small",children:e.jsxs(z,{value:h?.status||"",onChange:t=>P(h._id,t.target.value),children:[e.jsx(l,{value:"pending",children:"PENDING"}),e.jsx(l,{value:"paid",children:"PAID"}),e.jsx(l,{value:"shipped",children:"SHIPPED"}),e.jsx(l,{value:"completed",children:"COMPLETED"}),e.jsx(l,{value:"cancelled",children:"CANCELLED"})]})})]})}),e.jsxs(o,{className:"bg-background-paper rounded-[10px] overflow-hidden p-7.5 shadow-[0_5px_20px_0_rgba(0,0,0,0.05)]",children:[e.jsx(u,{variant:"h5",className:"text-foreground-primary mb-5",children:"Order List"}),e.jsx(o,{className:"flex justify-end items-center gap-4 mb-5",children:e.jsx(L,{placeholder:"Search",value:c,onChange:t=>j(t.target.value),size:"small",className:"grow basis-0",slotProps:{input:{startAdornment:e.jsx(H,{position:"start",children:e.jsx(B,{className:"text-[15px]"})})}}})}),e.jsx(I,{config:M,rows:r?.data||[],loading:b,renderAction:t=>e.jsx(q,{onClick:a=>C(a,t),children:e.jsx(k,{})})}),r&&r.meta.lastPage>1&&e.jsx(o,{className:"mt-5",children:e.jsx(w,{page:i,lastPage:r.meta.lastPage,onChangePage:t=>f(t),limit:r.meta.limit,total:r.meta.total,onChangeRowsPerPage:()=>{},rowsPerPageOptions:[]})})]})]})};export{fe as default};
