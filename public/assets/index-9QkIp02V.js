import{v as S,w as L,r as g,x as k,j as t,E as w,F as A,G as T,a5 as F,a as z,B as f,L as j,c as l}from"./index-CoCr-Lwu.js";import{u as B}from"./useCartStore-BRvEBAv5.js";import{b as P,c as R,a as q}from"./index-CIMJS-ok.js";import{c as _}from"./order.service-BCybII5u.js";import{f as v}from"./stringUtils-CDJQw5-v.js";import{C as I}from"./Container-DLkYmbpc.js";import{T as e}from"./Typography-3PLUSMmk.js";import{G as u}from"./Grid-BdMrhXSd.js";import{a as M,L as N}from"./List-B8z-TvVg.js";import{L as U}from"./ListItem-CguBAWnx.js";import{A as W}from"./Avatar-DKP2U2G5.js";import{L as D}from"./ListItemText-De2W9_Y4.js";import{I as h}from"./IconButton-De274572.js";import{D as C}from"./Divider-CEmajuvZ.js";import{C as G,a as E}from"./CardContent-BGcpYZla.js";import"./useFetch-Ef9WPhKv.js";import"./styled-Dr_zOePF.js";import"./isMuiElement-41k7TQVi.js";import"./listItemButtonClasses-R7Jnwdlq.js";import"./createSvgIcon-f0cybHIH.js";import"./listItemTextClasses-Djdqevzi.js";import"./dividerClasses-QzE5IgDx.js";function O(r){return S("MuiListItemAvatar",r)}L("MuiListItemAvatar",["root","alignItemsFlexStart"]);const Q=r=>{const{alignItems:a,classes:o}=r;return T({root:["root",a==="flex-start"&&"alignItemsFlexStart"]},O,o)},Y=w("div",{name:"MuiListItemAvatar",slot:"Root",overridesResolver:(r,a)=>{const{ownerState:o}=r;return[a.root,o.alignItems==="flex-start"&&a.alignItemsFlexStart]}})({minWidth:56,flexShrink:0,variants:[{props:{alignItems:"flex-start"},style:{marginTop:8}}]}),$=g.forwardRef(function(a,o){const i=k({props:a,name:"MuiListItemAvatar"}),{className:x,...n}=i,p=g.useContext(M),c={...i,alignItems:p.alignItems},d=Q(c);return t.jsx(Y,{className:A(d.root,x),ownerState:c,ref:o,...n})}),gt=()=>{const{items:r,removeItem:a,updateQuantity:o,getTotalPrice:i,clearCart:x}=B(),n=F(s=>s.setSnackbar),p=z(),[c,d]=g.useState(!1),b=async()=>{d(!0);try{const s=r.map(y=>({productId:y.product._id,quantity:y.quantity})),{error:m}=await _({items:s});m?n({type:"failure",message:m.message}):(n({type:"success",message:"Order created successfully!"}),x(),p("/orders"))}catch(s){n({type:"failure",message:s.message||"Failed to create order"})}finally{d(!1)}};return r.length===0?t.jsxs(I,{maxWidth:"md",sx:{py:8,textAlign:"center"},children:[t.jsx(e,{variant:"h5",gutterBottom:!0,children:"Your cart is empty"}),t.jsx(f,{component:j,to:"/",variant:"contained",sx:{mt:2},children:"Go Shopping"})]}):t.jsxs(I,{maxWidth:"lg",sx:{py:4},children:[t.jsx(e,{variant:"h4",component:"h1",gutterBottom:!0,fontWeight:"bold",children:"Shopping Cart"}),t.jsxs(u,{container:!0,spacing:4,children:[t.jsx(u,{size:{xs:12,md:8},children:t.jsx(N,{sx:{width:"100%",bgcolor:"background.paper",borderRadius:2,boxShadow:1},children:r.map(s=>t.jsxs(l,{children:[t.jsxs(U,{alignItems:"flex-start",secondaryAction:t.jsx(h,{edge:"end","aria-label":"delete",onClick:()=>a(s.product._id),children:t.jsx(q,{color:"error",className:"text-lg"})}),children:[t.jsx($,{sx:{mr:2},children:t.jsx(W,{variant:"rounded",src:s.product.imageUrl,sx:{width:80,height:80}})}),t.jsx(D,{secondaryTypographyProps:{component:"div"},primary:t.jsx(e,{variant:"h6",component:j,to:`/products/${s.product._id}`,sx:{textDecoration:"none",color:"inherit"},children:s.product.name}),secondary:t.jsxs(l,{sx:{mt:1},children:[t.jsx(e,{variant:"body2",color:"text.primary",children:v(s.product.price)}),t.jsxs(l,{sx:{display:"flex",alignItems:"center",mt:1,gap:1},children:[t.jsx(h,{size:"small",onClick:()=>o(s.product._id,s.quantity-1),children:t.jsx(P,{size:14})}),t.jsx(e,{variant:"body1",children:s.quantity}),t.jsx(h,{size:"small",onClick:()=>o(s.product._id,s.quantity+1),children:t.jsx(R,{size:14})})]})]})})]}),t.jsx(C,{variant:"inset",component:"li"})]},s.product._id))})}),t.jsx(u,{size:{xs:12,md:4},children:t.jsx(G,{sx:{borderRadius:2,boxShadow:1},children:t.jsxs(E,{children:[t.jsx(e,{variant:"h6",gutterBottom:!0,children:"Order Summary"}),t.jsxs(l,{sx:{display:"flex",justifyContent:"space-between",mb:2},children:[t.jsx(e,{variant:"body1",children:"Total Items"}),t.jsx(e,{variant:"body1",children:r.reduce((s,m)=>s+m.quantity,0)})]}),t.jsx(C,{sx:{my:2}}),t.jsxs(l,{sx:{display:"flex",justifyContent:"space-between",mb:4},children:[t.jsx(e,{variant:"h6",children:"Total Price"}),t.jsx(e,{variant:"h6",color:"primary",children:v(i())})]}),t.jsx(f,{fullWidth:!0,variant:"contained",size:"large",onClick:b,disabled:c,children:c?"Processing...":"Checkout Now"})]})})})]})]})};export{gt as default};
